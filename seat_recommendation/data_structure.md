# 座席推薦システム - サンプルデータ構造

このドキュメントは、プロジェクトで生成されるサンプルデータの構造を説明します。データは `data_generator.py` で生成され、`seat_recommendation/data/` ディレクトリに CSV 形式で保存されます。

## 概要

プロジェクトは以下の 4 つのデータセットを生成します：

- **座席情報**: 座席の固定属性
- **環境データ**: 時系列の室内環境測定値
- **ユーザープロファイル**: ユーザーの好みと属性
- **評価データ**: ユーザーの座席評価履歴

## データ取得方法

現実のシステム開発における各データの取得方法：

- **座席情報**: オフィスレイアウトデータや管理者による設定。CAD 図面や施設管理システムからインポート。
- **環境データ**: IoT センサー（温度計、湿度計、照度センサー、騒音計、CO2 センサー）による自動収集。定期測定やリアルタイム監視。
- **ユーザープロファイル**: 初回登録時のアンケートや設定フォーム。ユーザーの好みを自己申告で収集（例: 温度範囲、騒音感度）。
- **評価データ**: ユーザーの行動履歴やフィードバック。座席予約システムのログ、使用後の満足度評価、滞在時間分析から取得。

## 1. 座席情報 (`seat_info.csv`)

座席の固定属性を定義。グリッドレイアウト（5x10）を想定。

| 列名                | データ型  | 説明                                      | 例  |
| ------------------- | --------- | ----------------------------------------- | --- |
| `seat_id`           | int       | 座席 ID（0 から始まる連番）               | 0   |
| `row`               | int       | 行位置（0-4）                             | 0   |
| `col`               | int       | 列位置（0-9）                             | 0   |
| `is_window`         | int (0/1) | 窓際かどうか（列 0 または 9）             | 1   |
| `near_ac`           | int (0/1) | 空調近くかどうか（行 0 または 4）         | 1   |
| `near_entrance`     | int (0/1) | 出入り口近くかどうか（行 4 の右端）       | 0   |
| `quiet_area`        | int (0/1) | 静かなエリアかどうか（行 0-1）            | 1   |
| `has_monitor`       | int (0/1) | モニター付きかどうか（70%の確率）         | 1   |
| `has_standing_desk` | int (0/1) | スタンディングデスクかどうか（30%の確率） | 1   |

**目的:** 座席の固定属性を特徴量（位置、施設、レイアウト情報）として提供し、座席のフィルタ・推薦・最適割り当てに利用されます。

## 2. 環境データ (`environment_data.csv`)

各座席・タイムスタンプごとの室内環境測定値。時系列データ。

| 列名          | データ型 | 説明                               | 単位 | 範囲     | 例     |
| ------------- | -------- | ---------------------------------- | ---- | -------- | ------ |
| `timestamp`   | int      | タイムスタンプ（0 から始まる連番） | -    | 0-499    | 0      |
| `seat_id`     | int      | 座席 ID                            | -    | 0-29     | 0      |
| `temperature` | float    | 温度                               | °C   | 20-28    | 21.54  |
| `humidity`    | float    | 湿度                               | %    | 30-70    | 47.7   |
| `illuminance` | float    | 照度                               | lux  | 200-800  | 552.86 |
| `noise_level` | float    | 騒音レベル                         | dB   | 30-70    | 41.03  |
| `co2_level`   | float    | CO2 濃度                           | ppm  | 400-1200 | 511.85 |
| `hour`        | int      | 時刻（0-23 時、timestamp % 24）    | 時   | 0-23     | 0      |

**目的:** 各座席での時系列環境値（温度、湿度、照度、騒音、CO2）を提供し、集約して座席の環境特徴（平均・分散）を算出、適合度計算やモデルの入力に使用されます。

## 3. ユーザープロファイル (`user_profiles.csv`)

ユーザーの好みと属性。5 つのユーザータイプ（cold_sensitive, heat_sensitive, noise_sensitive, light_sensitive, balanced）に基づく。

| 列名                    | データ型  | 説明                            | 単位 | 範囲                                                                       | 例             |
| ----------------------- | --------- | ------------------------------- | ---- | -------------------------------------------------------------------------- | -------------- |
| `user_id`               | int       | ユーザー ID（0 から始まる連番） | -    | 0-99                                                                       | 0              |
| `user_type`             | str       | ユーザータイプ                  | -    | cold_sensitive, heat_sensitive, noise_sensitive, light_sensitive, balanced | heat_sensitive |
| `preferred_temperature` | float     | 好みの温度                      | °C   | 20-26                                                                      | 21.9           |
| `temperature_tolerance` | float     | 温度許容範囲                    | °C   | 0.5-2.0                                                                    | 0.87           |
| `preferred_humidity`    | float     | 好みの湿度                      | %    | 45-55                                                                      | 50.99          |
| `humidity_tolerance`    | float     | 湿度許容範囲                    | %    | 5-10                                                                       | 5.78           |
| `preferred_illuminance` | float     | 好みの照度                      | lux  | 300-700                                                                    | 531.2          |
| `illuminance_tolerance` | float     | 照度許容範囲                    | lux  | 50-200                                                                     | 105.81         |
| `max_acceptable_noise`  | float     | 許容最大騒音                    | dB   | 35-60                                                                      | 58.66          |
| `noise_tolerance`       | float     | 騒音許容範囲                    | dB   | 2-10                                                                       | 8.01           |
| `prefers_window`        | int (0/1) | 窓際を好むか                    | -    | 0/1                                                                        | 1              |
| `prefers_quiet`         | int (0/1) | 静かなエリアを好むか            | -    | 0/1                                                                        | 0              |
| `needs_monitor`         | int (0/1) | モニターが必要か                | -    | 0/1                                                                        | 1              |
| `prefers_standing_desk` | int (0/1) | スタンディングデスクを好むか    | -    | 0/1                                                                        | 1              |

**目的:** ユーザーごとの好み・許容値・属性を提供し、個人化された適合度計算やフィルタリング（例: モニター必須、窓際希望）に用いられます。

## 4. 評価データ (`user_ratings.csv`)

ユーザーの座席評価履歴。現実的な適合度に基づいて生成。

| 列名                 | データ型 | 説明               | 単位               | 範囲    | 例   |
| -------------------- | -------- | ------------------ | ------------------ | ------- | ---- |
| `user_id`            | int      | ユーザー ID        | -                  | 0-99    | 5    |
| `seat_id`            | int      | 座席 ID            | -                  | 0-29    | 8    |
| `overall_rating`     | float    | 総合評価           | 点（1-5 スケール） | 1.0-5.0 | 4.16 |
| `temperature_rating` | float    | 温度評価           | 点（1-5 スケール） | 1.0-5.0 | 4.97 |
| `noise_rating`       | float    | 騒音評価           | 点（1-5 スケール） | 1.0-5.0 | 3.1  |
| `light_rating`       | float    | 照度評価           | 点（1-5 スケール） | 1.0-5.0 | 2.06 |
| `timestamp`          | int      | 評価タイムスタンプ | -                  | 0-999   | 317  |

**目的:** ユーザーによる座席評価（`overall_rating` 等）を教師データとして提供し、モデルの訓練・評価・改善に使用されます。履歴は集計（平均等）され、時間的傾向やバイアス補正、信頼度指標等の解析にも活用できます。

## データ生成の特徴

- **現実性**: 環境データは時間帯・座席位置による変動を考慮。評価はユーザーの好みと座席特性に基づく適合度計算。
- **サイズ**: デモ実行時（30 座席、100 ユーザー、500 タイムスタンプ、2,000 評価）で、環境データ 15,000 レコード、評価 2,000 レコード。
- **保存形式**: CSV ファイル。各データセットは独立しており、機械学習モデルの訓練に使用。

この構造は、室内環境データとユーザーアンケートを活用した座席推薦システムの基盤となります。
